<html>

<head>

	<title>Student Management System</title>
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/admin_page.css">
	<script>
function updateFields(){




     var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("teacher_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];
}

for(var i=0;i< sitePersonel.length;i++)
{



if(sitePersonel[i].teacher == localStorage.getItem("id2"))
{



 document.getElementById("phoneno").value=sitePersonel[i].teacher_phone;

if(sitePersonel[i].teacher_gender=="M")
{

  document.getElementById("gmale").checked=true;
}
else{
 document.getElementById("gfmale").checked=true;

}
 

 document.getElementById("age").value=sitePersonel[i].teacher_age;

   


 document.getElementById("school").value=sitePersonel[i].teacher_school;

  document.getElementById("hschool").value=sitePersonel[i].teacher_hschool;

   document.getElementById("dcol").value=sitePersonel[i].teacher_dcol;
    document.getElementById("hcol").value=sitePersonel[i].teacher_hcol;
    



}






}


}

    function rememberlast()
    {


 document.getElementById("phoneno").disabled=true;


 document.getElementById("age").disabled=true;


 document.getElementById("gmale").disabled=true;
  document.getElementById("gfmale").disabled=true;

   document.getElementById("personal").hidden=true;


 document.getElementById("school").disabled=true;

  document.getElementById("hschool").disabled=true;

   document.getElementById("dcol").disabled=true;
    document.getElementById("hcol").disabled=true;
     document.getElementById("qual").hidden=true;
if(localStorage.getItem("status")=="out")
{


window.location.href = "Login.html";
  return false;
}


 if(localStorage.getItem("status")=="in")
{

if(localStorage.getItem("idname")=="admin")
  {

    window.location.href = "admin_page.html";
  return false;

  }else{


  }

}else if(localStorage.getItem("status")=="inHOD")
{


window.location.href = "hod.html";
  return false;



}
 

  document.getElementById("uid1").innerHTML="Welcome &nbsp;"+ localStorage.getItem("idname");


if(localStorage.getItem("idname")==null)
{


window.location.href = "Login.html";
  return false;

}


    var a = localStorage.getItem("id2");





                            var sitePersonel = [];
    var allotment = []

    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("MyAllocation"));

     if(sitePersonel==null)
     {

    sitePersonel = [];

     }

  document.getElementById("subjects").innerHTML="Subjects<br><br>";





       for(var i = 0; i < sitePersonel.length; i++) {



        var opt = sitePersonel[i].Teacher;

       


if(a==opt )
{



                            var sitePersone = [];
    var allotmen = []

    console.log(sitePersone);

      sitePersone = JSON.parse(localStorage.getItem("teacher"));

      console.log("Hello"+sitePersone);

     if(sitePersone==null)
     {

    sitePersone = [];

     }




for(var h=0;h<sitePersone.length;h++)
{

  var myteachername = "Teacher Name:"+sitePersone[h].teacher+" Username:"+sitePersone[h].teacher_uname;

if(myteachername == a)
{


       document.getElementById("designation").innerHTML="Designation&nbsp;:&nbsp;"+sitePersone[h].teacher_design;

}

}

       document.getElementById("department").innerHTML="Department&nbsp;:&nbsp;"+sitePersonel[i].Department;


  document.getElementById("subjects").innerHTML=  document.getElementById("subjects").innerHTML+sitePersonel[i].subject+"&nbsp;&nbsp;&nbsp;";





}
      }


     updateFields();



     }


     function checkStatus()
     {



 localStorage.setItem("status", "out");





     }


     function setProfile(){

       
 document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;






     }


     function saveProfile(){

       
document.getElementById("phoneno").disabled=true;


 document.getElementById("age").disabled=true;


 document.getElementById("gmale").disabled=true;
  document.getElementById("gfmale").disabled=true;

   document.getElementById("personal").hidden=true;
   


   document.getElementById("pqual").hidden=false;



                            var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("teacher_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];





     }

for(var i=0;i<sitePersonel.length;i++)
{


if(sitePersonel[i].teacher ==localStorage.getItem("id2") )

{

  flag=1;

var phno = document.getElementById("phoneno").value;

 var phoneno = /^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;
  if(!phoneno.test(phno) || phoneno.length<10) {
  
    confirm("You have entered Incorrect Phone Number");

    updateFields();
    return false;
  }


 if(document.getElementById("age").value.length>3  )
    {
alert("Please enter valid age");
       updateFields();
        return false;


    }
var gender="";

    if(document.getElementById('gmale').checked) {
  //Male radio button is checked
  gender="M";
}else if(document.getElementById('gfmale').checked) {
  //Female radio button is checked
  gender="F";
}








sitePersonel[i].teacher_phone= phno; 
sitePersonel[i].teacher_age= document.getElementById("age").value; 

sitePersonel[i].teacher_gender= gender; 
    localStorage.setItem("teacher_profile", JSON.stringify(sitePersonel));
        confirm("Successfully Updated");
break;
}



}


if(flag==0){
console.log("Hello I am Ankit");

var phno = document.getElementById("phoneno").value;

 var phoneno = /^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;
  if(!phoneno.test(phno) || phoneno.length<10) {
  
    confirm("You have entered Incorrect Phone Number");

updateFields();
    return false;
  }


 if(document.getElementById("age").value.length>4  )
    {
alert("Please enter valid age");
       updateFields();
        return false;


    }
var gender="";

    if(document.getElementById('gmale').checked) {
  //Male radio button is checked
  gender="M";
}else if(document.getElementById('gfmale').checked) {
  //Female radio button is checked
  gender="F";
}

      var combination = {
      "teacher": localStorage.getItem("id2"),
      "teacher_phone": phno,
      "teacher_age": document.getElementById("age").value,
      "teacher_gender": gender,
      "teacher_school":"N/A",
      "teacher_hschool":"N/A"   ,
      "teacher_dcol":"N/A" ,
      "teacher_hcol": "N/A" 
    }
    sitePersonel.push(combination);


    localStorage.setItem("teacher_profile", JSON.stringify(sitePersonel));






    confirm("Successfully Added");
}









     }

     function setQualification()
     {





 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;







     }



     function saveQual(){






 document.getElementById("school").disabled=true;

  document.getElementById("hschool").disabled=true;

   document.getElementById("dcol").disabled=true;
    document.getElementById("hcol").disabled=true;
     document.getElementById("qual").hidden=true;


   document.getElementById("equal").hidden=false;

                     var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("teacher_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];



     }

for(var i=0;i<sitePersonel.length;i++)
{


if(sitePersonel[i].teacher ==localStorage.getItem("id2") )

{

  flag=1;

var phno = document.getElementById("school").value;

 if(document.getElementById("School").value.length>4  )
    {
confirm("Please enter valid School name");
       updateFields();
        return false;


    }


 if(document.getElementById("hschool").value.length>4  )
    {
confirm("Please enter valid higher school");
       updateFields();
        return false;


    }

     if(document.getElementById("dcol").value.length>4  )
    {
confirm("Please enter valid degree College");
       updateFields();
        return false;


    }

      if(document.getElementById("hcol").value.length>4  )
    {
confirm("Please enter valid higher degree College");
       updateFields();
        return false;


    }








sitePersonel[i].teacher_school= document.getElementById("school").value; 
sitePersonel[i].teacher_hschool= document.getElementById("hschool").value; 

sitePersonel[i].teacher_dcol= document.getElementById("dcol").value;

sitePersonel[i].teacher_hcol= document.getElementById("hcol").value; 
    localStorage.setItem("teacher_profile", JSON.stringify(sitePersonel));
        confirm("Successfully Updated");
break;
}



}


if(flag==0){

  console.log("Hello I am Ankit");

var phno = document.getElementById("school").value;

 if(document.getElementById("School").value.length>4  )
    {
confirm("Please enter valid School name");
       updateFields();
        return false;


    }


 if(document.getElementById("hschool").value.length>4  )
    {
confirm("Please enter valid higher school");
       updateFields();
        return false;


    }

     if(document.getElementById("dcol").value.length>4  )
    {
confirm("Please enter valid degree College");
       updateFields();
        return false;


    }

      if(document.getElementById("hcol").value.length>4  )
    {
confirm("Please enter valid higher degree College");
       updateFields();
        return false;


    }


      var combination = {
      "teacher": localStorage.getItem("id2"),
      "teacher_phone": "N/A",
      "teacher_age": "N/A",
      "teacher_gender": "N/A",
      "teacher_school":document.getElementById("school").value,
      "teacher_hschool":document.getElementById("hschool").value   ,
      "teacher_dcol":document.getElementById("dcol").value ,
      "teacher_hcol": document.getElementById("hcol").value 
    }
    sitePersonel.push(combination);


    localStorage.setItem("teacher_profile", JSON.stringify(sitePersonel));






    confirm("Successfully Added");



}















     }
	</script>
</head>
 

<body onload="rememberlast()"  background="adminpage.png">

<br>
<a href="Login.html" onclick='return checkStatus()'><h2><span class="mystyle"  style="color:white;position: absolute;
    right: 150px;">&nbsp;Logout</span></h2></a>


<br>



	<center><h2> <label id="uid1" class="mystyle"  style="color:white";>Loading...</label></h2></label>

		

			
			<center><h3> <label id="department" class="mystyle"  style="color:white";></label></h3></label>




	<center><h3> <label id="subjects" class="mystyle"  style="color:white";></label></h3></label>





  <center><h3> <label id="designation" class="mystyle"  style="color:white";></label></h3></label>

		<br>
  





<div  style="float:left; margin-left:auto">

    <label class="mystyle" style="color:white";><h2>Personal Details</h2></label>
    <br>
    <br>
<label class="mystyle" style="color:white";>Phone No.</label>
<input  type="number" name="phoneNo" id="phoneno" required/>
<br><br>
<label class="mystyle" style="color:white";>Age</label>
<input  type="number" name="age" id="age" required/>
<br><br>
<label  class="mystyle" style="color:white";>Gender</label>
<br>
<input  type="radio" name="gender" id="gmale" required /><span class="mystyle"  style="color:white";>Male</span>
<input  type="radio" name="gender" id="gfmale"/><span class="mystyle" style="color:white";>Female</span>
<br><br>
<button id="personal"  onclick="return saveProfile()">Save Changes</button><br>

<button id="pqual" onclick="return setProfile()">Edit</button>
</div>

 <div style="float:left; position:absolute;left:46%">



     <center> <img src="user.png" alt="HTML5 Icon" style="width:128px;height:128px;"></center>



   </div>


<div style="float:right;margin-right:auto;">
 <label class="mystyle" style="color:white";><h2>Qualification Details</h2></label>
<label class="mystyle" style="color:white";>School (SSC)</label>
<input  type="text" name="age" id="school" required/>
<br><br>

<label class="mystyle" style="color:white";>&nbsp;Higher School</label>
<input  type="text" name="hschool" id="hschool" required/>
<br><br>
<label class="mystyle" style="color:white";>Degree College</label>
<input  type="text" name="dcol" id="dcol" required/>
<br><br>
<label class="mystyle" style="color:white";>Higher College</label>
<input  type="text" name="hcol" id="hcol" required/>
<br><br>
<button id="qual"  onclick="return saveQual()">Save Changes</button>

<button id="equal" onclick="return setQualification()">Edit</button>
</div>





</body>
</html>