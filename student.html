<html>

<head>

	<title>Student Management System</title>
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/admin_page.css">
	<script>
function updateFields(){




     var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("student_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];
}

for(var i=0;i< sitePersonel.length;i++)
{

 var w = "Student Name:"+localStorage.getItem("idname") +" Username:"+localStorage.getItem("id1") ;

if(sitePersonel[i].student ==w)
{



 document.getElementById("phoneno").value=sitePersonel[i].student_phone;

if(sitePersonel[i].student_gender=="M")
{

  document.getElementById("gmale").checked=true;
}
else{
 document.getElementById("gfmale").checked=true;

}
 

 document.getElementById("age").value=sitePersonel[i].student_age;

   


 document.getElementById("school").value=sitePersonel[i].student_school;

  document.getElementById("hschool").value=sitePersonel[i].student_hschool;

   document.getElementById("dcol").value=sitePersonel[i].student_dcol;
    document.getElementById("hcol").value=sitePersonel[i].student_hcol;
    



}






}


}

    function rememberlast()
    {

updateFields();
 document.getElementById("phoneno").disabled=true;


 document.getElementById("age").disabled=true;


 document.getElementById("gmale").disabled=true;
  document.getElementById("gfmale").disabled=true;

   document.getElementById("personal").hidden=true;


 document.getElementById("school").disabled=true;

  document.getElementById("hschool").disabled=true;

   document.getElementById("dcol").disabled=true;
    document.getElementById("hcol").disabled=true;
     document.getElementById("qual").hidden=true;
if(localStorage.getItem("status")=="out")
{


window.location.href = "Login.html";
  return false;
}


 if(localStorage.getItem("status")=="in")
{

if(localStorage.getItem("idname")=="admin")
  {

    window.location.href = "admin_page.html";
  return false;

  }else{


    window.location.href = "teacher_page.html";
  return false;

  }

}else if(localStorage.getItem("status")=="inHOD")
{


window.location.href = "hod.html";
  return false;



}


 

  document.getElementById("uid1").innerHTML="Welcome &nbsp;"+ localStorage.getItem("idname");

    document.getElementById("department").innerHTML="Department&nbsp;:&nbsp;"+  localStorage.getItem("id2");



if(localStorage.getItem("idname")==null)
{


window.location.href = "Login.html";
  return false;

}


    var a = localStorage.getItem("id2");





                        


     }


     function checkStatus()
     {



 localStorage.setItem("status", "out");





     }


     function setProfile(){

       
 document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;






     }


     function saveProfile(){

       
document.getElementById("phoneno").disabled=true;


 document.getElementById("age").disabled=true;


 document.getElementById("gmale").disabled=true;
  document.getElementById("gfmale").disabled=true;

   document.getElementById("personal").hidden=true;
   


   document.getElementById("pqual").hidden=false;



                            var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("student_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];





     }

for(var i=0;i<sitePersonel.length;i++)
{

 
    var w = "Student Name:"+localStorage.getItem("idname") +" Username:"+localStorage.getItem("id1") ;
if(sitePersonel[i].student ==w )

{

  flag=1;

var phno = document.getElementById("phoneno").value;

 var phoneno = /^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;
  if(!phoneno.test(phno) || phoneno.length<10) {
  
    confirm("You have entered Incorrect Phone Number");

   document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;


    return false;
  }


 if(document.getElementById("age").value.length>3  )
    {
alert("Please enter valid age");
       document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;


        return false;


    }
var gender="";

    if(document.getElementById('gmale').checked) {
  //Male radio button is checked
  gender="M";
}else if(document.getElementById('gfmale').checked) {
  //Female radio button is checked
  gender="F";
}








sitePersonel[i].student_phone= phno; 
sitePersonel[i].student_age= document.getElementById("age").value; 

sitePersonel[i].student_gender= gender; 
    localStorage.setItem("student_profile", JSON.stringify(sitePersonel));
        confirm("Successfully Updated");

        updateFields();
break;
}



}


if(flag==0){
console.log("Hello I am Ankit");

var phno = document.getElementById("phoneno").value;

 var phoneno = /^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/;
  if(!phoneno.test(phno) || phoneno.length<10) {
  
    confirm("You have entered Incorrect Phone Number");

 document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;


    return false;
  }


 if(document.getElementById("age").value.length>4  )
    {
alert("Please enter valid age");
   document.getElementById("phoneno").disabled=false;


 document.getElementById("age").disabled=false;


 document.getElementById("gmale").disabled=false;
  document.getElementById("gfmale").disabled=false;

   document.getElementById("personal").hidden=false;


   document.getElementById("pqual").hidden=true;


        return false;


    }
var gender="";

    if(document.getElementById('gmale').checked) {
  //Male radio button is checked
  gender="M";
}else if(document.getElementById('gfmale').checked) {
  //Female radio button is checked
  gender="F";
}

      var combination = {
      "student": "Student Name:"+localStorage.getItem("idname") +" Username:"+localStorage.getItem("id1"),
      "student_phone": phno,
      "student_age": document.getElementById("age").value,
      "student_gender": gender,
      "student_school":"N/A",
      "student_hschool":"N/A"   ,
      "student_dcol":"N/A" ,
      "student_hcol": "N/A" 
    }
    sitePersonel.push(combination);


    localStorage.setItem("student_profile", JSON.stringify(sitePersonel));






    confirm("Successfully Added");
    updateFields();
}









     }

     function setQualification()
     {





 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;







     }



     function saveQual(){






 document.getElementById("school").disabled=true;

  document.getElementById("hschool").disabled=true;

   document.getElementById("dcol").disabled=true;
    document.getElementById("hcol").disabled=true;
     document.getElementById("qual").hidden=true;


   document.getElementById("equal").hidden=false;

                     var sitePersonel = [];
    var allotment = []
var flag=0;
    console.log(sitePersonel);

      sitePersonel = JSON.parse(localStorage.getItem("student_profile"));

     if(sitePersonel==null)
     {

    sitePersonel = [];



     }

for(var i=0;i<sitePersonel.length;i++)
{


    var w = "Student Name:"+localStorage.getItem("idname") +" Username:"+localStorage.getItem("id1") ;
if(sitePersonel[i].student ==w )

{

  flag=1;

var phno = document.getElementById("school").value;

 if(document.getElementById("school").value.length<3  )
    {
confirm("Please enter valid School name");
       
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }


 if(document.getElementById("hschool").value.length<3 )
    {
confirm("Please enter valid higher school");
      
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }

     if(document.getElementById("dcol").value.length<3  )
    {
confirm("Please enter valid degree College");
       
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }

      if(document.getElementById("hcol").value.length<3  )
    {
confirm("Please enter valid higher degree College");
       
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }








sitePersonel[i].student_school= document.getElementById("school").value; 
sitePersonel[i].student_hschool= document.getElementById("hschool").value; 

sitePersonel[i].student_dcol= document.getElementById("dcol").value;

sitePersonel[i].student_hcol= document.getElementById("hcol").value; 
    localStorage.setItem("student_profile", JSON.stringify(sitePersonel));
        confirm("Successfully Updated");
        updateFields();
break;
}



}


if(flag==0){

  console.log("Hello I am Ankit");

var phno = document.getElementById("school").value;

 if(document.getElementById("school").value.length<3  )
    {
confirm("Please enter valid School name");
      
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }


 if(document.getElementById("hschool").value.length<3 )
    {
confirm("Please enter valid higher school");
     
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }

     if(document.getElementById("dcol").value.length<3  )
    {
confirm("Please enter valid degree College");
      
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }

      if(document.getElementById("hcol").value.length<3  )
    {
confirm("Please enter valid higher degree College");
       
 document.getElementById("school").disabled=false;

  document.getElementById("hschool").disabled=false;

   document.getElementById("dcol").disabled=false;
    document.getElementById("hcol").disabled=false;
     document.getElementById("qual").hidden=false;


   document.getElementById("equal").hidden=true;


        return false;


    }


      var combination = {
      "student": "Student Name:"+localStorage.getItem("idname") +" Username:"+localStorage.getItem("id1"),
      "student_phone": "N/A",
      "student_age": "N/A",
      "student_gender": "N/A",
      "student_school":document.getElementById("school").value,
      "student_hschool":document.getElementById("hschool").value   ,
      "student_dcol":document.getElementById("dcol").value ,
      "student_hcol": document.getElementById("hcol").value 
    }
    sitePersonel.push(combination);


    localStorage.setItem("student_profile", JSON.stringify(sitePersonel));






    confirm("Successfully Added");

updateFields();

}















     }
	</script>
</head>
 

<body onload="rememberlast()"  background="admin.jpg">

<br>
<a href="Login.html" onclick='return checkStatus()'><h2><span class="mystyle"  style="color:white;margin-right:9px;float:right;">&nbsp;Logout</span></h2></a>


<br>



	<center><h2> <label id="uid1" class="mystyle"  style="color:white";>Loading...</label></h2></label>

		

			
			<center><h3> <label id="department" class="mystyle"  style="color:white";></label></h3></label>




	
		<br>
  





<div  style="float:left; margin-left:12%">
<br><br><br>
    <label class="mystyle" style="color:white";><h2>Personal Details</h2></label>
    <br>
    <br>

<input  type="number" name="phoneNo" id="phoneno" style="border-radius:30px;height:30px; text-align:center"  placeholder="Phone No." required/>
<br><br>

<input  type="number" name="age" id="age" style="border-radius:30px;height:30px;  text-align:center;"placeholder="Age" required/>
<br><br>
<label  class="mystyle" style="color:white";>Gender</label>
<br>
<input  type="radio" name="gender" id="gmale" required /><span class="mystyle"  style="color:white";>Male</span>
<input  type="radio" name="gender" id="gfmale"/><span class="mystyle" style="color:white";>Female</span>
<br><br>
<button id="personal"  style="border-radius:30px;height:30px; text-align:center" onclick="return saveProfile()">Save Changes</button><br>

<button id="pqual" style="border-radius:30px;height:30px; text-align:center"onclick="return setProfile()">Edit</button>
</div>

 <div style="float:left; position:absolute;left:46%">



     <center> <img src="user.png" alt="HTML5 Icon" style="width:128px;height:128px;"></center>



   </div>


<div style="float:right;margin-right:12%;">
  <br><br><br>
 <label class="mystyle" style="color:white";><h2>Qualification Details</h2></label>

<input  type="text" name="age" id="school" style="border-radius:30px;height:30px; text-align:center" placeholder="School (SSC)" required/>
<br><br>


<input  type="text" name="hschool" style="border-radius:30px;height:30px; text-align:center" placeholder="Higher School" id="hschool" required/>
<br><br>

<input  type="text" name="dcol" style="border-radius:30px;height:30px;text-align:center" placeholder="Degree College" text-align:center" id="dcol" required/>
<br><br>

<input  type="text" name="hcol" style="border-radius:30px;height:30px; text-align:center" placeholder="Higher College" id="hcol" required/>
<br><br>
<input type="submit" id="qual" style="border-radius:30px;height:30px; text-align:center" onclick="return saveQual()" value="Save Changes"/>

<input type="submit" id="equal"  style="border-radius:30px;height:30px; text-align:center" onclick="return setQualification()" value="Edit"/>
</div>





</body>
</html>